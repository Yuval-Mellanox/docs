<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">

<head>
  {{ partial "head" . }}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tablesaw/3.1.2/tablesaw.min.css" integrity="sha512-FW7xwIsGt3iCswNR3o4kcXqkKDvN8Q7obwdxFODRT+L6XkRtScLElfvobA7bjiC2iTgG/sRaBUqdrhqx0RTauw==" crossorigin="anonymous" />
  {{ partial "google-analytics" . }}
</head>


<body class="docs">
<!-- PDF output does not require standard menus -->
{{if ne .Page.Type "pdf"}}
  <input type="checkbox" style="display: none" id="menu-control" />

  <!-- Green bar header -->
  {{ partial "top-header" . }}
<div class="docs-wrapper">
  {{ partial "version-dropdown" . }}

  {{ partial "mobile-dropdown" . }}

  <main class="container flex">
    <aside class="book-menu">

      <nav role="navigation">
        <h2 class="book-brand"><a href="{{ .Site.BaseURL }}">{{ .Site.Title }}</a></h2>
        <!-- branch to list.html or single.html -->
        {{ block "menu" . }}
          {{ partial "menu/menu-sectiontree" . }}

        {{ end }}
      </nav>

      <!-- pipes in /assets/js and bundles into $jsMenu-->
      {{ $jsScroll := resources.Get "js/menu.js" }}
      {{ $jsCollapse := resources.Get "js/collapse.js"}}
      {{ $jsCustom := resources.Get "js/custom.js" }}
      {{ $jsMenu := slice $jsScroll $jsCollapse $jsCustom | resources.Concat "js/menuBundle.js"}}

      <script src = "{{ $jsMenu.Permalink }}"> </script>

    </aside>
{{ end }}

<div class="book-page">
  {{ block "main" . }}
  {{ end }}
</div>

{{ block "toc" .}}
{{ end }}

</main>
</div>

{{if ne .Page.Params.layout "pdf"}}
{{ partialCached "footer" . }}

<!-- Announcement bars -->
{{ $jsAnnouncementBar := resources.Get "js/announcement-bar.js" }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src = "{{ $jsAnnouncementBar.Permalink }}"> </script>
<script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.5.1/dist/algoliasearch-lite.umd.js" integrity="sha256-EXPXz4W6pQgfYY3yTpnDa3OH8/EPn16ciVsPQ/ypsjk=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.8.3/dist/instantsearch.production.min.js" integrity="sha256-LAGhRRdtVoD6RLo2qDQsU2mp+XVSciKRC8XPOBWmofM=" crossorigin="anonymous"></script>

<script>
    const searchClient = algoliasearch('9KW04NGCM1', 'fe44f8b8eb18f4b89872e2f03f7cb87d');

    const search = instantsearch({
        indexName: 'cumulus_docs',
        searchClient,
    });

    search.addWidgets([
      instantsearch.widgets.searchBox({
        container: '#search-box',
      }),
      instantsearch.widgets.refinementList({
        container: '#dropdown',
        attribute: 'version',
      }),
      instantsearch.widgets.hits({
        container: '#hits',
        templates: {
          item: `
            <div>
              <div class="hit-name">
                {{#helpers.highlight}}{ "attribute": "content" }{{/helpers.highlight}}
              </div>
            </div>
          `
        }
      })
    ])

    search.start();

</script>

<!-- The following Javascript does not play well with PDF output tools -->

  {{ partialCached "footer-javascript" . }}
{{ end }}

</body>
</html>
